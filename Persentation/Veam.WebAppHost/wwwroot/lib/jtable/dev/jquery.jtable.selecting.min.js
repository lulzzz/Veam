/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/jtable@2.6.0/dev/jquery.jtable.selecting.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e){var t={_create:e.hik.jtable.prototype._create,_addColumnsToHeaderRow:e.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:e.hik.jtable.prototype._addCellsToRowUsingRecord,_onLoadingRecords:e.hik.jtable.prototype._onLoadingRecords,_onRecordsLoaded:e.hik.jtable.prototype._onRecordsLoaded,_onRowsRemoved:e.hik.jtable.prototype._onRowsRemoved};e.extend(!0,e.hik.jtable.prototype,{options:{selecting:!1,multiselect:!1,selectingCheckboxes:!1,selectOnRowClick:!0,selectionChanged:function(e,t){}},_selectedRecordIdsBeforeLoad:null,_$selectAllCheckbox:null,_shiftKeyDown:!1,_create:function(){this.options.selecting&&this.options.selectingCheckboxes&&(++this._firstDataColumnOffset,this._bindKeyboardEvents()),t._create.apply(this,arguments)},_bindKeyboardEvents:function(){var t=this;e(document).keydown(function(e){switch(e.which){case 16:t._shiftKeyDown=!0}}).keyup(function(e){switch(e.which){case 16:t._shiftKeyDown=!1}})},selectedRows:function(){return this._getSelectedRows()},selectRows:function(e){this._selectRows(e),this._onSelectionChanged()},_addColumnsToHeaderRow:function(e){this.options.selecting&&this.options.selectingCheckboxes&&(this.options.multiselect?e.append(this._createSelectAllHeader()):e.append(this._createEmptyCommandHeader())),t._addColumnsToHeaderRow.apply(this,arguments)},_addCellsToRowUsingRecord:function(e){this.options.selecting&&this._makeRowSelectable(e),t._addCellsToRowUsingRecord.apply(this,arguments)},_onLoadingRecords:function(){this.options.selecting&&this._storeSelectionList(),t._onLoadingRecords.apply(this,arguments)},_onRecordsLoaded:function(){this.options.selecting&&this._restoreSelectionList(),t._onRecordsLoaded.apply(this,arguments)},_onRowsRemoved:function(e,o){this.options.selecting&&"reloading"!=o&&e.filter(".jtable-row-selected").length>0&&this._onSelectionChanged(),t._onRowsRemoved.apply(this,arguments)},_createSelectAllHeader:function(){var t=this,o=e('<th class=""></th>').addClass("jtable-command-column-header jtable-column-header-selecting");this._jqueryuiThemeAddClass(o,"ui-state-default");var s=e("<div />").addClass("jtable-column-header-container").appendTo(o);return t._$selectAllCheckbox=e('<input type="checkbox" />').appendTo(s).click(function(){if(t._$tableRows.length<=0)t._$selectAllCheckbox.attr("checked",!1);else{var e=t._$tableBody.find(">tr.jtable-data-row");t._$selectAllCheckbox.is(":checked")?t._selectRows(e):t._deselectRows(e),t._onSelectionChanged()}}),o},_storeSelectionList:function(){var t=this;t.options.selecting&&(t._selectedRecordIdsBeforeLoad=[],t._getSelectedRows().each(function(){t._selectedRecordIdsBeforeLoad.push(t._getKeyValueOfRecord(e(this).data("record")))}))},_restoreSelectionList:function(){if(this.options.selecting){for(var t=0,o=0;o<this._$tableRows.length;++o){var s=this._getKeyValueOfRecord(this._$tableRows[o].data("record"));e.inArray(s,this._selectedRecordIdsBeforeLoad)>-1&&(this._selectRows(this._$tableRows[o]),++t)}this._selectedRecordIdsBeforeLoad.length>0&&this._selectedRecordIdsBeforeLoad.length!=t&&this._onSelectionChanged(),this._selectedRecordIdsBeforeLoad=[],this._refreshSelectAllCheckboxState()}},_getSelectedRows:function(){return this._$tableBody.find(">tr.jtable-row-selected")},_makeRowSelectable:function(t){var o=this;if(o.options.selectOnRowClick&&t.click(function(){o._invertRowSelection(t)}),o.options.selectingCheckboxes){var s=e("<td></td>").addClass("jtable-selecting-column"),i=e('<input type="checkbox" />').appendTo(s);o.options.selectOnRowClick||i.click(function(){o._invertRowSelection(t)}),t.append(s)}},_invertRowSelection:function(e){if(e.hasClass("jtable-row-selected"))this._deselectRows(e);else if(this._shiftKeyDown){var t=this._findRowIndex(e),o=this._findFirstSelectedRowIndexBeforeIndex(t)+1;if(o>0&&o<t)this._selectRows(this._$tableBody.find("tr").slice(o,t+1));else{var s=this._findFirstSelectedRowIndexAfterIndex(t)-1;s>t?this._selectRows(this._$tableBody.find("tr").slice(t,s+1)):this._selectRows(e)}}else this._selectRows(e);this._onSelectionChanged()},_findFirstSelectedRowIndexBeforeIndex:function(e){for(var t=e-1;t>=0;--t)if(this._$tableRows[t].hasClass("jtable-row-selected"))return t;return-1},_findFirstSelectedRowIndexAfterIndex:function(e){for(var t=e+1;t<this._$tableRows.length;++t)if(this._$tableRows[t].hasClass("jtable-row-selected"))return t;return-1},_selectRows:function(e){this.options.multiselect||this._deselectRows(this._getSelectedRows()),e.addClass("jtable-row-selected"),this._jqueryuiThemeAddClass(e,"ui-state-highlight"),this.options.selectingCheckboxes&&e.find(">td.jtable-selecting-column >input").prop("checked",!0),this._refreshSelectAllCheckboxState()},_deselectRows:function(e){e.removeClass("jtable-row-selected ui-state-highlight"),this.options.selectingCheckboxes&&e.find(">td.jtable-selecting-column >input").prop("checked",!1),this._refreshSelectAllCheckboxState()},_refreshSelectAllCheckboxState:function(){if(this.options.selectingCheckboxes&&this.options.multiselect){var e=this._$tableRows.length,t=this._getSelectedRows().length;0==t?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!1)):t==e?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!0)):(this._$selectAllCheckbox.attr("checked",!1),this._$selectAllCheckbox.prop("indeterminate",!0))}},_onSelectionChanged:function(){this._trigger("selectionChanged",null,{})}})}(jQuery);
//# sourceMappingURL=/sm/bf3d88fd7c43a959aee448c1270f577610869942fc471afb8e28c3da5001bf93.map