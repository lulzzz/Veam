/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/jtable@2.6.0/dev/jquery.jtable.dynamiccolumns.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e){var i={_create:e.hik.jtable.prototype._create,_normalizeFieldOptions:e.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:e.hik.jtable.prototype._createHeaderCellForField,_createCellForRecordField:e.hik.jtable.prototype._createCellForRecordField};e.extend(!0,e.hik.jtable.prototype,{options:{tableId:void 0,columnResizable:!0,columnSelectable:!0},_$columnSelectionDiv:null,_$columnResizeBar:null,_cookieKeyPrefix:null,_currentResizeArgs:null,_create:function(){i._create.apply(this,arguments),this._createColumnResizeBar(),this._createColumnSelection(),this.options.saveUserPreferences&&this._loadColumnSettings(),this._normalizeColumnWidths()},_normalizeFieldOptions:function(e,t){i._normalizeFieldOptions.apply(this,arguments),this.options.columnResizable&&(t.columnResizable=0!=t.columnResizable),t.visibility||(t.visibility="visible")},_createHeaderCellForField:function(e,t){var n=i._createHeaderCellForField.apply(this,arguments);return this.options.columnResizable&&t.columnResizable&&e!=this._columnList[this._columnList.length-1]&&this._makeColumnResizable(n),"hidden"==t.visibility&&n.hide(),n},_createCellForRecordField:function(e,t){var n=i._createCellForRecordField.apply(this,arguments);return"hidden"==this.options.fields[t].visibility&&n.hide(),n},changeColumnVisibility:function(e,i){this._changeColumnVisibilityInternal(e,i),this._normalizeColumnWidths(),this.options.saveUserPreferences&&this._saveColumnSettings()},_changeColumnVisibilityInternal:function(e,i){var t=this._columnList.indexOf(e);if(t<0)this._logWarn('Column "'+e+'" does not exist in fields!');else if(["visible","hidden","fixed"].indexOf(i)<0)this._logWarn('Visibility value is not valid: "'+i+'"! Options are: visible, hidden, fixed.');else{var n=this.options.fields[e];if(n.visibility!=i){var l=this._firstDataColumnOffset+t+1;"hidden"!=n.visibility&&"hidden"==i?this._$table.find(">thead >tr >th:nth-child("+l+"),>tbody >tr >td:nth-child("+l+")").hide():"hidden"==n.visibility&&"hidden"!=i&&this._$table.find(">thead >tr >th:nth-child("+l+"),>tbody >tr >td:nth-child("+l+")").show().css("display","table-cell"),n.visibility=i}}},_createColumnSelection:function(){var i=this;this._$columnSelectionDiv=e("<div />").addClass("jtable-column-selection-container").appendTo(i._$mainContainer),this._$table.children("thead").bind("contextmenu",function(t){if(i.options.columnSelectable){t.preventDefault(),e("<div />").addClass("jtable-contextmenu-overlay").click(function(){e(this).remove(),i._$columnSelectionDiv.hide()}).bind("contextmenu",function(){return!1}).appendTo(document.body),i._fillColumnSelection();var n=i._$mainContainer.offset(),l=t.pageY-n.top,s=t.pageX-n.left,a=i._$mainContainer.width();a>100&&s>a-100&&(s=a-100),i._$columnSelectionDiv.css({left:s,top:l,"min-width":"100px"}).show()}})},_fillColumnSelection:function(){for(var i=this,t=e("<ul></ul>").addClass("jtable-column-select-list"),n=0;n<this._columnList.length;n++){var l=this._columnList[n],s=this.options.fields[l],a=e("<li></li>").appendTo(t),o=e('<label for="'+l+'"></label>').append(e("<span>"+(s.title||l)+"</span>")).appendTo(a),r=e('<input type="checkbox" name="'+l+'">').prependTo(o).click(function(){var t=e(this),n=t.attr("name");"fixed"!=i.options.fields[n].visibility&&i.changeColumnVisibility(n,t.is(":checked")?"visible":"hidden")});"hidden"!=s.visibility&&r.attr("checked","checked"),"fixed"==s.visibility&&r.attr("disabled","disabled")}this._$columnSelectionDiv.html(t)},_createColumnResizeBar:function(){this._$columnResizeBar=e("<div />").addClass("jtable-column-resize-bar").appendTo(this._$mainContainer).hide()},_makeColumnResizable:function(i){var t=this;e("<div />").addClass("jtable-column-resize-handler").appendTo(i.find(".jtable-column-header-container")).mousedown(function(n){n.preventDefault(),n.stopPropagation();var l=t._$mainContainer.offset(),s=i.nextAll("th.jtable-column-header:visible:first");if(s.length){t._currentResizeArgs={currentColumnStartWidth:i.outerWidth(),minWidth:10,maxWidth:i.outerWidth()+s.outerWidth()-10,mouseStartX:n.pageX,minResizeX:function(){return this.mouseStartX-(this.currentColumnStartWidth-this.minWidth)},maxResizeX:function(){return this.mouseStartX+(this.maxWidth-this.currentColumnStartWidth)}};var a=function(e){if(t._currentResizeArgs){var i=t._normalizeNumber(e.pageX,t._currentResizeArgs.minResizeX(),t._currentResizeArgs.maxResizeX());t._$columnResizeBar.css("left",i-l.left+"px")}},o=function(n){if(t._currentResizeArgs){e(document).unbind("mousemove",a),e(document).unbind("mouseup",o),t._$columnResizeBar.hide();var l=n.pageX-t._currentResizeArgs.mouseStartX,r=t._normalizeNumber(t._currentResizeArgs.currentColumnStartWidth+l,t._currentResizeArgs.minWidth,t._currentResizeArgs.maxWidth),d=s.outerWidth()+(t._currentResizeArgs.currentColumnStartWidth-r),c=i.data("width-in-percent")/t._currentResizeArgs.currentColumnStartWidth;i.data("width-in-percent",r*c),s.data("width-in-percent",d*c),i.css("width",i.data("width-in-percent")+"%"),s.css("width",s.data("width-in-percent")+"%"),t._normalizeColumnWidths(),t._currentResizeArgs=null,t.options.saveUserPreferences&&t._saveColumnSettings()}};t._$columnResizeBar.show().css({top:i.offset().top-l.top+"px",left:n.pageX-l.left+"px",height:t._$table.outerHeight()+"px"}),e(document).bind("mousemove",a),e(document).bind("mouseup",o)}})},_normalizeColumnWidths:function(){var i=this._$table.find(">thead th.jtable-command-column-header").data("width-in-percent",1).css("width","1%"),t=this._$table.find(">thead th.jtable-column-header"),n=0;t.each(function(){var i=e(this);i.is(":visible")&&(n+=i.outerWidth())});var l={},s=100-i.length;t.each(function(){var i=e(this);if(i.is(":visible")){var t=i.data("fieldName"),a=i.outerWidth()*s/n;l[t]=a}}),t.each(function(){var i=e(this);if(i.is(":visible")){var t=i.data("fieldName");i.data("width-in-percent",l[t]).css("width",l[t]+"%")}})},_saveColumnSettings:function(){var i=this,t="";this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var n=e(this),l=n.data("fieldName"),s=n.data("width-in-percent"),a=i.options.fields[l].visibility;t=t+(l+"="+a+";"+s)+"|"}),this._setCookie("column-settings",t.substr(0,t.length-1))},_loadColumnSettings:function(){var i=this,t=this._getCookie("column-settings");if(t){var n={};e.each(t.split("|"),function(e,i){var t=i.split("="),l=t[0],s=t[1].split(";");n[l]={columnVisibility:s[0],columnWidth:s[1]}}),this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var t=e(this),l=t.data("fieldName"),s=i.options.fields[l];n[l]&&("fixed"!=s.visibility&&i._changeColumnVisibilityInternal(l,n[l].columnVisibility),t.data("width-in-percent",n[l].columnWidth).css("width",n[l].columnWidth+"%"))})}}})}(jQuery);
//# sourceMappingURL=/sm/ea4ef712b13038133aa20a8a8a6bec190d36a948802de7c7e82588e79d014808.map