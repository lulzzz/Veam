/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/jtable@2.6.0/dev/jquery.jtable.deletion.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e){var o={_create:e.hik.jtable.prototype._create,_addColumnsToHeaderRow:e.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:e.hik.jtable.prototype._addCellsToRowUsingRecord};e.extend(!0,e.hik.jtable.prototype,{options:{deleteConfirmation:!0,recordDeleted:function(e,o){},messages:{deleteConfirmation:"This record will be deleted. Are you sure?",deleteText:"Delete",deleting:"Deleting",canNotDeletedRecords:"Can not delete {0} of {1} records!",deleteProggress:"Deleting {0} of {1} records, processing..."}},_$deleteRecordDiv:null,_$deletingRow:null,_create:function(){o._create.apply(this,arguments),this._createDeleteDialogDiv()},_createDeleteDialogDiv:function(){var o=this;o.options.actions.deleteAction&&(o._$deleteRecordDiv=e('<div><p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span><span class="jtable-delete-confirm-message"></span></p></div>').appendTo(o._$mainContainer),o._$deleteRecordDiv.dialog({autoOpen:!1,show:o.options.dialogShowEffect,hide:o.options.dialogHideEffect,modal:!0,title:o.options.messages.areYouSure,buttons:[{text:o.options.messages.cancel,click:function(){o._$deleteRecordDiv.dialog("close")}},{id:"DeleteDialogButton",text:o.options.messages.deleteText,click:function(){if(o._$deletingRow.hasClass("jtable-row-removed"))o._$deleteRecordDiv.dialog("close");else{var e=o._$deleteRecordDiv.parent().find("#DeleteDialogButton");o._setEnabledOfDialogButton(e,!1,o.options.messages.deleting),o._deleteRecordFromServer(o._$deletingRow,function(){o._removeRowsFromTableWithAnimation(o._$deletingRow),o._$deleteRecordDiv.dialog("close")},function(t){o._showError(t),o._setEnabledOfDialogButton(e,!0,o.options.messages.deleteText)})}}}],close:function(){var e=o._$deleteRecordDiv.parent().find("#DeleteDialogButton");o._setEnabledOfDialogButton(e,!0,o.options.messages.deleteText)}}))},deleteRows:function(o){var t=this;if(o.length<=0)t._logWarn("No rows specified to jTable deleteRows method.");else if(t._isBusy())t._logWarn("Can not delete rows since jTable is busy!");else if(1!=o.length){t._showBusy(t._formatString(t.options.messages.deleteProggress,0,o.length));var n=0,i=function(){return n>=o.length},s=function(){var e=o.filter(".jtable-row-ready-to-remove");e.length<o.length&&t._showError(t._formatString(t.options.messages.canNotDeletedRecords,o.length-e.length,o.length)),e.length>0&&t._removeRowsFromTableWithAnimation(e),t._hideBusy()},l=0;o.each(function(){var a=e(this);t._deleteRecordFromServer(a,function(){++l,++n,a.addClass("jtable-row-ready-to-remove"),t._showBusy(t._formatString(t.options.messages.deleteProggress,l,o.length)),i()&&s()},function(){++n,i()&&s()})})}else t._deleteRecordFromServer(o,function(){t._removeRowsFromTableWithAnimation(o)},function(e){t._showError(e)})},deleteRecord:function(o){var t=this;if(null!=(o=e.extend({clientOnly:!1,animationsEnabled:t.options.animationsEnabled,url:t.options.actions.deleteAction,success:function(){},error:function(){}},o)).key){var n=t.getRowByKey(o.key);if(null!=n)return o.clientOnly?(t._removeRowsFromTableWithAnimation(n,o.animationsEnabled),void o.success()):void t._deleteRecordFromServer(n,function(e){t._removeRowsFromTableWithAnimation(n,o.animationsEnabled),o.success(e)},function(e){t._showError(e),o.error(e)},o.url);t._logWarn("Can not found any row by key: "+o.key)}else t._logWarn("options parameter in deleteRecord method must contain a key property.")},_addColumnsToHeaderRow:function(e){o._addColumnsToHeaderRow.apply(this,arguments),null!=this.options.actions.deleteAction&&e.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function(t){o._addCellsToRowUsingRecord.apply(this,arguments);var n=this;if(null!=n.options.actions.deleteAction){var i=e("<span></span>").html(n.options.messages.deleteText),s=e('<button title="'+n.options.messages.deleteText+'"></button>').addClass("jtable-command-button jtable-delete-command-button").append(i).click(function(e){e.preventDefault(),e.stopPropagation(),n._deleteButtonClickedForRow(t)});e("<td></td>").addClass("jtable-command-column").append(s).appendTo(t)}},_deleteButtonClickedForRow:function(o){var t,n=this,i=n.options.messages.deleteConfirmation;if(e.isFunction(n.options.deleteConfirmation)){var s={row:o,record:o.data("record"),deleteConfirm:!0,deleteConfirmMessage:i,cancel:!1,cancelMessage:null};if(n.options.deleteConfirmation(s),s.cancel)return void(s.cancelMessage&&n._showError(s.cancelMessage));i=s.deleteConfirmMessage,t=s.deleteConfirm}else t=n.options.deleteConfirmation;0!=t?(n._$deleteRecordDiv.find(".jtable-delete-confirm-message").html(i),n._showDeleteDialog(o)):n._deleteRecordFromServer(o,function(){n._removeRowsFromTableWithAnimation(o)},function(e){n._showError(e)})},_showDeleteDialog:function(e){this._$deletingRow=e,this._$deleteRecordDiv.dialog("open")},_deleteRecordFromServer:function(o,t,n,i){var s=this,l=function(e){if("OK"!=e.Result)return o.data("deleting",!1),void(n&&n(e.Message));s._trigger("recordDeleted",null,{record:o.data("record"),row:o,serverResponse:e}),t&&t(e)};if(1!=o.data("deleting")){o.data("deleting",!0);var a={};if(a[s._keyField]=s._getKeyValueOfRecord(o.data("record")),!i&&e.isFunction(s.options.actions.deleteAction)){var r=s.options.actions.deleteAction(a);s._isDeferredObject(r)?r.done(function(e){l(e)}).fail(function(){o.data("deleting",!1),n&&n(s.options.messages.serverCommunicationError)}):l(r)}else this._ajax({url:i||s.options.actions.deleteAction,data:a,success:function(e){l(e)},error:function(){o.data("deleting",!1),n&&n(s.options.messages.serverCommunicationError)}})}},_removeRowsFromTableWithAnimation:function(e,o){var t=this;if(null==o&&(o=t.options.animationsEnabled),o){var n="jtable-row-deleting";this.options.jqueryuiTheme&&(n+=" ui-state-disabled"),e.stop(!0,!0).addClass(n,"slow","").promise().done(function(){t._removeRowsFromTable(e,"deleted")})}else t._removeRowsFromTable(e,"deleted")}})}(jQuery);
//# sourceMappingURL=/sm/279bbafd6944ff9a1a698d4c48d0f873026716f4172373f51f32f6681619ac9a.map