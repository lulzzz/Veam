/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/jtable@2.6.0/dev/jquery.jtable.editing.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e){var o={_create:e.hik.jtable.prototype._create,_addColumnsToHeaderRow:e.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:e.hik.jtable.prototype._addCellsToRowUsingRecord};e.extend(!0,e.hik.jtable.prototype,{options:{recordUpdated:function(e,o){},rowUpdated:function(e,o){},messages:{editRecord:"Edit Record"}},_$editDiv:null,_$editingRow:null,_create:function(){o._create.apply(this,arguments),this.options.actions.updateAction&&this._createEditDialogDiv()},_createEditDialogDiv:function(){var o=this;o._$editDiv=e("<div></div>").appendTo(o._$mainContainer),o._$editDiv.dialog({autoOpen:!1,show:o.options.dialogShowEffect,hide:o.options.dialogHideEffect,width:"auto",minWidth:"300",modal:!0,title:o.options.messages.editRecord,buttons:[{text:o.options.messages.cancel,click:function(){o._$editDiv.dialog("close")}},{id:"EditDialogSaveButton",text:o.options.messages.save,click:function(){o._onSaveClickedOnEditForm()}}],close:function(){var e=o._$editDiv.find("form:first"),t=o._$editDiv.parent().find("#EditDialogSaveButton");o._trigger("formClosed",null,{form:e,formType:"edit",row:o._$editingRow}),o._setEnabledOfDialogButton(t,!0,o.options.messages.save),e.remove()}})},_onSaveClickedOnEditForm:function(){if(this._$editingRow.hasClass("jtable-row-removed"))this._$editDiv.dialog("close");else{var e=this._$editDiv.parent().find("#EditDialogSaveButton"),o=this._$editDiv.find("form");0!=this._trigger("formSubmitting",null,{form:o,formType:"edit",row:this._$editingRow})&&(this._setEnabledOfDialogButton(e,!1,this.options.messages.saving),this._saveEditForm(o,e))}},updateRecord:function(o){var t=this;if((o=e.extend({clientOnly:!1,animationsEnabled:t.options.animationsEnabled,success:function(){},error:function(){}},o)).record){var i=t._getKeyValueOfRecord(o.record);if(null!=i&&null!=i){var n=t.getRowByKey(i);if(null!=n){if(o.clientOnly)return e.extend(n.data("record"),o.record),t._updateRowTexts(n),t._onRecordUpdated(n,null),o.animationsEnabled&&t._showUpdateAnimationForRow(n),void o.success();var a=function(i){if("OK"!=i.Result)return t._showError(i.Message),void o.error(i);e.extend(n.data("record"),o.record),t._updateRecordValuesFromServerResponse(n.data("record"),i),t._updateRowTexts(n),t._onRecordUpdated(n,i),o.animationsEnabled&&t._showUpdateAnimationForRow(n),o.success(i)};if(!o.url&&e.isFunction(t.options.actions.updateAction)){var r=t.options.actions.updateAction(e.param(o.record));t._isDeferredObject(r)?r.done(function(e){a(e)}).fail(function(){t._showError(t.options.messages.serverCommunicationError),o.error()}):a(r)}else t._submitFormUsingAjax(o.url||t.options.actions.updateAction,e.param(o.record),function(e){a(e)},function(){t._showError(t.options.messages.serverCommunicationError),o.error()})}else t._logWarn('Can not found any row by key "'+i+'" on the table. Updating row must be visible on the table.')}else t._logWarn("options parameter in updateRecord method must contain a record that contains the key field property.")}else t._logWarn("options parameter in updateRecord method must contain a record property.")},_addColumnsToHeaderRow:function(e){o._addColumnsToHeaderRow.apply(this,arguments),null!=this.options.actions.updateAction&&e.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function(t){var i=this;if(o._addCellsToRowUsingRecord.apply(this,arguments),null!=i.options.actions.updateAction){var n=e("<span></span>").html(i.options.messages.editRecord),a=e('<button title="'+i.options.messages.editRecord+'"></button>').addClass("jtable-command-button jtable-edit-command-button").append(n).click(function(e){e.preventDefault(),e.stopPropagation(),i._showEditForm(t)});e("<td></td>").addClass("jtable-command-column").append(a).appendTo(t)}},_showEditForm:function(o){for(var t=this,i=o.data("record"),n=e('<form id="jtable-edit-form" class="jtable-dialog-form jtable-edit-form"></form>'),a=0;a<t._fieldList.length;a++){var r=t._fieldList[a],d=t.options.fields[r],s=i[r];if(1==d.key){if(1!=d.edit){n.append(t._createInputForHidden(r,s));continue}n.append(t._createInputForHidden("jtRecordKey",s))}if(0!=d.edit)if("hidden"!=d.type){var c=e('<div class="jtable-input-field-container"></div>').appendTo(n);c.append(t._createInputLabelForRecordField(r));var l=t._getValueForRecordField(i,r);c.append(t._createInputForRecordField({fieldName:r,value:l,record:i,formType:"edit",form:n}))}else n.append(t._createInputForHidden(r,s))}t._makeCascadeDropDowns(n,i,"edit"),n.submit(function(){return t._onSaveClickedOnEditForm(),!1}),t._$editingRow=o,t._$editDiv.append(n).dialog("open"),t._trigger("formCreated",null,{form:n,formType:"edit",record:i,row:o})},_saveEditForm:function(o,t){var i=this,n=function(e){if("OK"!=e.Result)return i._showError(e.Message),void i._setEnabledOfDialogButton(t,!0,i.options.messages.save);var n=i._$editingRow.data("record");i._updateRecordValuesFromForm(n,o),i._updateRecordValuesFromServerResponse(n,e),i._updateRowTexts(i._$editingRow),i._$editingRow.attr("data-record-key",i._getKeyValueOfRecord(n)),i._onRecordUpdated(i._$editingRow,e),i.options.animationsEnabled&&i._showUpdateAnimationForRow(i._$editingRow),i._$editDiv.dialog("close")};if(e.isFunction(i.options.actions.updateAction)){var a=i.options.actions.updateAction(o.serialize());i._isDeferredObject(a)?a.done(function(e){n(e)}).fail(function(){i._showError(i.options.messages.serverCommunicationError),i._setEnabledOfDialogButton(t,!0,i.options.messages.save)}):n(a)}else i._submitFormUsingAjax(i.options.actions.updateAction,o.serialize(),function(e){n(e)},function(){i._showError(i.options.messages.serverCommunicationError),i._setEnabledOfDialogButton(t,!0,i.options.messages.save)})},_updateRecordValuesFromServerResponse:function(o,t){t&&t.Record&&e.extend(!0,o,t.Record)},_getValueForRecordField:function(e,o){var t=this.options.fields[o],i=e[o];return"date"==t.type?this._getDisplayTextForDateRecordField(t,i):i},_updateRowTexts:function(e){for(var o=e.data("record"),t=e.find("td"),i=0;i<this._columnList.length;i++){var n=this._getDisplayTextForRecordField(o,this._columnList[i]);0===n&&(n="0"),t.eq(this._firstDataColumnOffset+i).html(n||"")}this._onRowUpdated(e)},_showUpdateAnimationForRow:function(e){var o="jtable-row-updated";this.options.jqueryuiTheme&&(o+=" ui-state-highlight"),e.stop(!0,!0).addClass(o,"slow","",function(){e.removeClass(o,5e3)})},_onRowUpdated:function(e){this._trigger("rowUpdated",null,{row:e,record:e.data("record")})},_onRecordUpdated:function(e,o){this._trigger("recordUpdated",null,{record:e.data("record"),row:e,serverResponse:o})}})}(jQuery);
//# sourceMappingURL=/sm/a53ec2e38a6447e08923ccc333b8d02ac2e9a58958fc3cc5da1e9a3b4b578c6e.map