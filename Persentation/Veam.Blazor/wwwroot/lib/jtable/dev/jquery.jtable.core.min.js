/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/jtable@2.6.0/dev/jquery.jtable.core.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e){var t;e(window).on("beforeunload",function(){t=!0}),e(window).on("unload",function(){t=!1}),e.widget("hik.jtable",{options:{actions:{},fields:{},animationsEnabled:!0,defaultDateFormat:"yy-mm-dd",defaultChangeMonth:!1,defaultChangeYear:!1,defaultYearRange:"c-10:c+10",defaultMaxDate:null,dialogShowEffect:"fade",dialogHideEffect:"fade",showCloseButton:!1,loadingAnimationDelay:500,saveUserPreferences:!0,jqueryuiTheme:!1,unAuthorizedRequestRedirectUrl:null,ajaxSettings:{type:"POST",dataType:"json"},toolbar:{hoverAnimation:!0,hoverAnimationDuration:60,hoverAnimationEasing:void 0,items:[]},closeRequested:function(e,t){},formCreated:function(e,t){},formSubmitting:function(e,t){},formClosed:function(e,t){},loadingRecords:function(e,t){},recordsLoaded:function(e,t){},rowInserted:function(e,t){},rowsRemoved:function(e,t){},messages:{serverCommunicationError:"An error occured while communicating to the server.",loadingMessage:"Loading records...",noDataAvailable:"No data available!",areYouSure:"Are you sure?",save:"Save",saving:"Saving",cancel:"Cancel",error:"Error",close:"Close",cannotLoadOptionsFor:"Can not load options for field {0}"}},_$mainContainer:null,_$titleDiv:null,_$toolbarDiv:null,_$table:null,_$tableBody:null,_$tableRows:null,_$busyDiv:null,_$busyMessageDiv:null,_$errorDialogDiv:null,_columnList:null,_fieldList:null,_keyField:null,_firstDataColumnOffset:0,_lastPostData:null,_cache:null,_extraFieldTypes:[],_create:function(){this._normalizeFieldsOptions(),this._initializeFields(),this._createFieldAndColumnList(),this._createMainContainer(),this._createTableTitle(),this._createToolBar(),this._createTable(),this._createBusyPanel(),this._createErrorDialogDiv(),this._addNoDataRow(),this._cookieKeyPrefix=this._generateCookieKeyPrefix()},_normalizeFieldsOptions:function(){var t=this;e.each(t.options.fields,function(e,o){t._normalizeFieldOptions(e,o)})},_normalizeFieldOptions:function(t,o){if(null==o.listClass&&(o.listClass=""),null==o.inputClass&&(o.inputClass=""),null==o.placeholder&&(o.placeholder=""),o.dependsOn&&"string"===e.type(o.dependsOn)){var i=o.dependsOn.split(",");o.dependsOn=[];for(var n=0;n<i.length;n++)o.dependsOn.push(e.trim(i[n]))}},_initializeFields:function(){this._lastPostData={},this._$tableRows=[],this._columnList=[],this._fieldList=[],this._cache=[],this._extraFieldTypes=[]},_createFieldAndColumnList:function(){var t=this;e.each(t.options.fields,function(e,o){t._fieldList.push(e),1==o.key&&(t._keyField=e),0!=o.list&&"hidden"!=o.type&&t._columnList.push(e)})},_createMainContainer:function(){this._$mainContainer=e("<div />").addClass("jtable-main-container").appendTo(this.element),this._jqueryuiThemeAddClass(this._$mainContainer,"ui-widget")},_createTableTitle:function(){var t=this;if(t.options.title){var o=e("<div />").addClass("jtable-title").appendTo(t._$mainContainer);if(t._jqueryuiThemeAddClass(o,"ui-widget-header"),e("<div />").addClass("jtable-title-text").appendTo(o).append(t.options.title),t.options.showCloseButton){var i=e("<span />").html(t.options.messages.close);e("<button></button>").addClass("jtable-command-button jtable-close-button").attr("title",t.options.messages.close).append(i).appendTo(o).click(function(e){e.preventDefault(),e.stopPropagation(),t._onCloseRequested()})}t._$titleDiv=o}},_createTable:function(){this._$table=e("<table></table>").addClass("jtable").appendTo(this._$mainContainer),this.options.tableId&&this._$table.attr("id",this.options.tableId),this._jqueryuiThemeAddClass(this._$table,"ui-widget-content"),this._createTableHead(),this._createTableBody()},_createTableHead:function(){var t=e("<thead></thead>").appendTo(this._$table);this._addRowToTableHead(t)},_addRowToTableHead:function(t){var o=e("<tr></tr>").appendTo(t);this._addColumnsToHeaderRow(o)},_addColumnsToHeaderRow:function(e){for(var t=0;t<this._columnList.length;t++){var o=this._columnList[t];this._createHeaderCellForField(o,this.options.fields[o]).appendTo(e)}},_createHeaderCellForField:function(t,o){o.width=o.width||"10%";var i=e("<span />").addClass("jtable-column-header-text").html(o.title),n=e("<div />").addClass("jtable-column-header-container").append(i),a=e("<th></th>").addClass("jtable-column-header").addClass(o.listClass).css("width",o.width).data("fieldName",t).append(n);return this._jqueryuiThemeAddClass(a,"ui-state-default"),a},_createEmptyCommandHeader:function(){var t=e("<th></th>").addClass("jtable-command-column-header").css("width","1%");return this._jqueryuiThemeAddClass(t,"ui-state-default"),t},_createTableBody:function(){this._$tableBody=e("<tbody></tbody>").appendTo(this._$table)},_createBusyPanel:function(){this._$busyMessageDiv=e("<div />").addClass("jtable-busy-message").prependTo(this._$mainContainer),this._$busyDiv=e("<div />").addClass("jtable-busy-panel-background").prependTo(this._$mainContainer),this._jqueryuiThemeAddClass(this._$busyMessageDiv,"ui-widget-header"),this._hideBusy()},_createErrorDialogDiv:function(){var t=this;t._$errorDialogDiv=e("<div></div>").appendTo(t._$mainContainer),t._$errorDialogDiv.dialog({autoOpen:!1,show:t.options.dialogShowEffect,hide:t.options.dialogHideEffect,modal:!0,title:t.options.messages.error,buttons:[{text:t.options.messages.close,click:function(){t._$errorDialogDiv.dialog("close")}}]})},load:function(e,t){this._lastPostData=e,this._reloadTable(t)},reload:function(e){this._reloadTable(e)},getRowByKey:function(e){for(var t=0;t<this._$tableRows.length;t++)if(e==this._getKeyValueOfRecord(this._$tableRows[t].data("record")))return this._$tableRows[t];return null},destroy:function(){this.element.empty(),e.Widget.prototype.destroy.call(this)},_setOption:function(e,t){},_reloadTable:function(t){var o=this,i=function(e){o._hideBusy(),"OK"==e.Result?(o._removeAllRows("reloading"),o._addRecordsToTable(e.Records),o._onRecordsLoaded(e),t&&t()):o._showError(e.Message)};if(o._showBusy(o.options.messages.loadingMessage,o.options.loadingAnimationDelay),o._onLoadingRecords(),e.isFunction(o.options.actions.listAction)){var n=o.options.actions.listAction(o._lastPostData,o._createJtParamsForLoading());o._isDeferredObject(n)?n.done(function(e){i(e)}).fail(function(){o._showError(o.options.messages.serverCommunicationError)}).always(function(){o._hideBusy()}):i(n)}else{var a=o._createRecordLoadUrl();o._ajax({url:a,data:o._lastPostData,success:function(e){i(e)},error:function(){o._hideBusy(),o._showError(o.options.messages.serverCommunicationError)}})}},_createRecordLoadUrl:function(){return this.options.actions.listAction},_createJtParamsForLoading:function(){return{}},_createRowFromRecord:function(t){var o=e("<tr></tr>").addClass("jtable-data-row").attr("data-record-key",this._getKeyValueOfRecord(t)).data("record",t);return this._addCellsToRowUsingRecord(o),o},_addCellsToRowUsingRecord:function(e){for(var t=e.data("record"),o=0;o<this._columnList.length;o++)this._createCellForRecordField(t,this._columnList[o]).appendTo(e)},_createCellForRecordField:function(t,o){return e("<td></td>").addClass(this.options.fields[o].listClass).append(this._getDisplayTextForRecordField(t,o))},_addRecordsToTable:function(t){var o=this;e.each(t,function(e,t){o._addRow(o._createRowFromRecord(t))}),o._refreshRowStyles()},_addRowToTable:function(e,t,o,i){var n={index:this._normalizeNumber(t,0,this._$tableRows.length,this._$tableRows.length)};1==o&&(n.isNewRow=!0),0==i&&(n.animationsEnabled=!1),this._addRow(e,n)},_addRow:function(t,o){o=e.extend({index:this._$tableRows.length,isNewRow:!1,animationsEnabled:!0},o),this._$tableRows.length<=0&&this._removeNoDataRow(),o.index=this._normalizeNumber(o.index,0,this._$tableRows.length,this._$tableRows.length),o.index==this._$tableRows.length?(this._$tableBody.append(t),this._$tableRows.push(t)):0==o.index?(this._$tableBody.prepend(t),this._$tableRows.unshift(t)):(this._$tableRows[o.index-1].after(t),this._$tableRows.splice(o.index,0,t)),this._onRowInserted(t,o.isNewRow),o.isNewRow&&(this._refreshRowStyles(),this.options.animationsEnabled&&o.animationsEnabled&&this._showNewRowAnimation(t))},_showNewRowAnimation:function(e){var t="jtable-row-created";this.options.jqueryuiTheme&&(t+=" ui-state-highlight"),e.addClass(t,"slow","",function(){e.removeClass(t,5e3)})},_removeRowsFromTable:function(t,o){var i=this;t.length<=0||(t.addClass("jtable-row-removed").remove(),t.each(function(){var t=i._findRowIndex(e(this));t>=0&&i._$tableRows.splice(t,1)}),i._onRowsRemoved(t,o),0==i._$tableRows.length&&i._addNoDataRow(),i._refreshRowStyles())},_findRowIndex:function(e){return this._findIndexInArray(e,this._$tableRows,function(e,t){return e.data("record")==t.data("record")})},_removeAllRows:function(e){if(!(this._$tableRows.length<=0)){var t=this._$tableBody.find("tr.jtable-data-row");this._$tableBody.empty(),this._$tableRows=[],this._onRowsRemoved(t,e),this._addNoDataRow()}},_addNoDataRow:function(){if(!(this._$tableBody.find(">tr.jtable-no-data-row").length>0)){var t=e("<tr></tr>").addClass("jtable-no-data-row").appendTo(this._$tableBody),o=this._$table.find("thead th").length;e("<td></td>").attr("colspan",o).html(this.options.messages.noDataAvailable).appendTo(t)}},_removeNoDataRow:function(){this._$tableBody.find(".jtable-no-data-row").remove()},_refreshRowStyles:function(){for(var e=0;e<this._$tableRows.length;e++)e%2==0?this._$tableRows[e].addClass("jtable-row-even"):this._$tableRows[e].removeClass("jtable-row-even")},_getDisplayTextForRecordField:function(e,t){var o=this.options.fields[t],i=e[t];if(o.display)return o.display({record:e});var n=this._findItemByProperty(this._extraFieldTypes,"type",o.type);if(n&&n.creator)return n.creator(e,o);if("date"==o.type)return this._getDisplayTextForDateRecordField(o,i);if("checkbox"==o.type)return this._getCheckBoxTextForFieldByValue(t,i);if(o.options){var a=this._getOptionsForField(t,{record:e,value:i,source:"list",dependedValues:this._createDependedValuesUsingRecord(e,o.dependsOn)});return this._findOptionByValue(a,i).DisplayText}return i},_createDependedValuesUsingRecord:function(e,t){if(!t)return{};for(var o={},i=0;i<t.length;i++)o[t[i]]=e[t[i]];return o},_findOptionByValue:function(e,t){return this._findItemByProperty(e,"Value",t)},_findItemByProperty:function(e,t,o){for(var i=0;i<e.length;i++)if(e[i][t]==o)return e[i];return{}},_getDisplayTextForDateRecordField:function(e,t){if(!t)return"";var o=e.displayFormat||this.options.defaultDateFormat,i=this._parseDate(t);try{return this._formatDate(o,i)}catch(e){return i}},_formatDate:function(e,t){var o=function(e,t,o){return o=o||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(o)+e};return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("ss",o(t.getSeconds(),2))).replace("s",t.getSeconds())).replace("dd",o(t.getDate(),2))).replace("d",t.getDate())).replace("mm",o(t.getMinutes(),2))).replace("m",t.getMinutes())).replace("MM",o(t.getMonth()+1,2))).replace(/M(?![ao])/,t.getMonth()+1)).replace("yyyy",t.getFullYear())).replace("YYYY",t.getFullYear())).replace("yy",(t.getFullYear()+"").substring(2))).replace("YY",(t.getFullYear()+"").substring(2))).replace("HH",o(t.getHours(),2))).replace("H",t.getHours())).replace("hh",o(t.getHours(),2))).replace("h",t.getHours())},_getOptionsForField:function(t,o){var i,n=this.options.fields[t],a=n.options;if(e.isFunction(a)&&(a=a(o=e.extend(!0,{_cacheCleared:!1,dependedValues:{},clearCache:function(){this._cacheCleared=!0}},o))),"string"==typeof a){var s="options_"+t+"_"+a;if(o._cacheCleared||!this._cache[s])this._cache[s]=this._buildOptionsFromArray(this._downloadOptions(t,a)),this._sortFieldOptions(this._cache[s],n.optionsSorting);else if(null!=o.value)null==this._findOptionByValue(this._cache[s],o.value).DisplayText&&(this._cache[s]=this._buildOptionsFromArray(this._downloadOptions(t,a)),this._sortFieldOptions(this._cache[s],n.optionsSorting));i=this._cache[s]}else jQuery.isArray(a)?(i=this._buildOptionsFromArray(a),this._sortFieldOptions(i,n.optionsSorting)):(i=this._buildOptionsArrayFromObject(a),this._sortFieldOptions(i,n.optionsSorting));return i},_downloadOptions:function(e,t){var o=this,i=[];return o._ajax({url:t,async:!1,success:function(e){"OK"==e.Result?i=e.Options:o._showError(e.Message)},error:function(){var t=o._formatString(o.options.messages.cannotLoadOptionsFor,e);o._showError(t)}}),i},_sortFieldOptions:function(t,o){var i,n;t&&t.length&&o&&(i=0==o.indexOf("value")?function(e){return e.Value}:function(e){return e.DisplayText},n="string"==e.type(i(t[0]))?function(e,t){return i(e).localeCompare(i(t))}:function(e,t){return i(e)-i(t)},o.indexOf("desc")>0?t.sort(function(e,t){return n(t,e)}):t.sort(function(e,t){return n(e,t)}))},_buildOptionsArrayFromObject:function(t){var o=[];return e.each(t,function(e,t){o.push({Value:e,DisplayText:t})}),o},_buildOptionsFromArray:function(t){for(var o=[],i=0;i<t.length;i++)e.isPlainObject(t[i])?o.push(t[i]):o.push({Value:t[i],DisplayText:t[i]});return o},_parseDate:function(e){try{if(e.indexOf("Date")>=0)return new Date(parseInt(e.substr(6),10));if(10==e.length)return new Date(parseInt(e.substr(0,4),10),parseInt(e.substr(5,2),10)-1,parseInt(e.substr(8,2),10));if(19==e.length)return new Date(parseInt(e.substr(0,4),10),parseInt(e.substr(5,2),10)-1,parseInt(e.substr(8,2),10),parseInt(e.substr(11,2),10),parseInt(e.substr(14,2),10),parseInt(e.substr(17,2),10));if(e.indexOf("T")>0){var t=e.replace(/\D/g," ").split(" ");return t[1]--,new Date(Date.UTC(t[0],t[1],t[2],t[3],t[4],t[5]))}throw"Given date is not properly formatted: "+e}catch(e){return this._logWarn(e),"format error!"}},_createToolBar:function(){this._$toolbarDiv=e("<div />").addClass("jtable-toolbar").appendTo(this._$titleDiv);for(var t=0;t<this.options.toolbar.items.length;t++)this._addToolBarItem(this.options.toolbar.items[t])},_addToolBarItem:function(t){if(null==t||null==t.text&&null==t.icon)return this._logWarn("Can not add tool bar item since it is not valid!"),this._logWarn(t),null;var o=e("<span></span>").addClass("jtable-toolbar-item").appendTo(this._$toolbarDiv);if(this._jqueryuiThemeAddClass(o,"ui-widget ui-state-default ui-corner-all","ui-state-hover"),t.cssClass&&o.addClass(t.cssClass),t.tooltip&&o.attr("title",t.tooltip),t.icon){var i=e('<span class="jtable-toolbar-item-icon"></span>').appendTo(o);!0===t.icon||e.type("string"===t.icon)&&i.css("background",'url("'+t.icon+'")')}t.text&&e('<span class=""></span>').html(t.text).addClass("jtable-toolbar-item-text").appendTo(o),t.click&&o.click(function(){t.click()});var n=void 0,a=void 0;return this.options.toolbar.hoverAnimation&&(n=this.options.toolbar.hoverAnimationDuration,a=this.options.toolbar.hoverAnimationEasing),o.hover(function(){o.addClass("jtable-toolbar-item-hover",n,a)},function(){o.removeClass("jtable-toolbar-item-hover",n,a)}),o},_showError:function(e){this._$errorDialogDiv.html(e).dialog("open")},_setBusyTimer:null,_showBusy:function(e,t){var o=this;o._$busyDiv.width(o._$mainContainer.width()).height(o._$mainContainer.height()).addClass("jtable-busy-panel-background-invisible").show();var i=function(){o._$busyDiv.removeClass("jtable-busy-panel-background-invisible"),o._$busyMessageDiv.html(e).show()};if(t){if(o._setBusyTimer)return;o._setBusyTimer=setTimeout(i,t)}else i()},_hideBusy:function(){clearTimeout(this._setBusyTimer),this._setBusyTimer=null,this._$busyDiv.hide(),this._$busyMessageDiv.html("").hide()},_isBusy:function(){return this._$busyMessageDiv.is(":visible")},_jqueryuiThemeAddClass:function(e,t,o){this.options.jqueryuiTheme&&(e.addClass(t),o&&e.hover(function(){e.addClass(o)},function(){e.removeClass(o)}))},_performAjaxCall:function(e,t,o,i,n){this._ajax({url:e,data:t,async:o,success:i,error:n})},_unAuthorizedRequestHandler:function(){this.options.unAuthorizedRequestRedirectUrl?location.href=this.options.unAuthorizedRequestRedirectUrl:location.reload(!0)},_ajax:function(o){var i=this,n={statusCode:{401:function(){i._unAuthorizedRequestHandler()}}};(n=e.extend(n,this.options.ajaxSettings,o)).success=function(e){e&&1==e.UnAuthorizedRequest&&i._unAuthorizedRequestHandler(),o.success&&o.success(e)},n.error=function(e,i,n){t?e.abort():o.error&&o.error(arguments)},n.complete=function(){o.complete&&o.complete()},e.ajax(n)},_getKeyValueOfRecord:function(e){return e[this._keyField]},_setCookie:function(e,t){e=this._cookieKeyPrefix+e;var o=new Date;o.setDate(o.getDate()+30),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; expires="+o.toUTCString()},_getCookie:function(e){e=this._cookieKeyPrefix+e;for(var t=document.cookie.split("; "),o=0;o<t.length;o++)if(t[o]){var i=t[o].split("=");if(2==i.length&&decodeURIComponent(i[0])===e)return decodeURIComponent(i[1]||"")}return null},_generateCookieKeyPrefix:function(){var e="";return this.options.tableId&&(e=e+this.options.tableId+"#"),"jtable#"+function(e){var t=0;if(0==e.length)return t;for(var o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t&=t;return t}(e=e+this._columnList.join("$")+"#c"+this._$table.find("thead th").length)},_onLoadingRecords:function(){this._trigger("loadingRecords",null,{})},_onRecordsLoaded:function(e){this._trigger("recordsLoaded",null,{records:e.Records,serverResponse:e})},_onRowInserted:function(e,t){this._trigger("rowInserted",null,{row:e,record:e.data("record"),isNewRow:t})},_onRowsRemoved:function(e,t){this._trigger("rowsRemoved",null,{rows:e,reason:t})},_onCloseRequested:function(){this._trigger("closeRequested",null,{})}})}(jQuery);
//# sourceMappingURL=/sm/e4583209fed551666d26400a697d7e2b4e006f9e0980f0980a67efb69ddb6096.map